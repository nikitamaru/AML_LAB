{% load static %}
{% load custom_filters %}


<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Trip Advisor</title>
        <meta http-equiv="X-UA-Compatible" content="IE-Edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="icon" href="images/favicon.png" type="image/x-icon"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="{% static 'css/font.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/owl.carousel.min.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/owl.theme.default.min.css' %}">
        <link rel="stylesheet" type="text/css" href="{%static 'css/style.css' %}">
        <link rel="stylesheet" type="text/css" href="{%static 'css/media.css' %}">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="{% static 'js/owl.carousel.min.js' %}"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script src="{% static 'js/jquery.responsiveTabs.js' %}" type="text/javascript"></script>
        <script type="text/javascript" src="{% static 'js/general.js' %}"></script>
        <style media="screen">
        button:disabled,
        button[disabled]{
        border: 1px solid #999999;
        background-color: #cccccc;
        color: #666666;
        }
        #pageloader
        {
        text-align: center;
        display: none;

        }

        #pageloader img
        {
          width: 6%;
          height: 50%;
          position: static;
        }
        #pageloader1
        {
        text-align: center;
        display: none;

        }

        #pageloader1 img
        {
          width: 6%;
          height: 50%;
          position: static;
        }
        .ratings{
            margin-right:10px;
        }

        .ratings i{

            color:#cecece;
            font-size:32px;
        }

        .rating-color{
            color:#fbc634 !important;
        }

        .review-count{
            font-weight:400;
            margin-bottom:2px;
            font-size:24px !important;
        }

        .small-ratings i{
          color:#cecece;
        }

        .review-stat{
            font-weight:300;
            font-size:18px;
            margin-bottom:2px;
        }
        </style>
    </head>
    <body>
        <header style="display: contents!important">
            <div class="container">
                <div class="logo pull-left"><a href="/" title="logo"><img src="{% static 'images/logo.png' %}" alt="logo"></a></div>
                <nav class="mainnav pull-right" style="padding-top: 7%!important">
                    <div class="menu"><a href="#" title="menu"><img src="{% static 'images/menu.png' %}"></a></div>
                    <ul>
                        <li class="visible-xs">
                            <div class="search-box">
                                <input type="text" placeholder="Seacrh">
                            </div>  </li>
                            <li><a href="#" title="Tourist Places" style="background-color: #08808a;color: white;">Tourist Places</a></li>
                            <li class="active"><a href="/" title="Hotels">Hotels</a></li>
                            <li><a href="/restaurants" title="Restaurants">Restaurants</a></li>
                            <li><a href="/logout" title="Logout">Logout</a></li>
                            <li><a href="#" data-toggle="modal" data-target="#myModal" title="Search">Search</a></li>
                            <!-- <li class="searchbar hidden-xs"><a href="#" title="Search" class="search"> <img src="{% static 'images/search.png' %}" alt="search"> </a>
                            <i class="bi bi-search"></i>
                            <div class="search-box">
                                <input type="text" placeholder="Seacrh">
                            </div>  </li> -->
                        </ul>

                    </nav>
                </div>
            </header>
            <main>
              {% for item in search %}
              <div class="col-md-4">
                <div class="card" style="height: 500px!important; margin-bottom: 15px">
                  {% if item.place_pic %}
                  <img class="card-img-top" src="{{ item.place_pic }}" alt="Card image cap" style="height: 70%!important;>
                  {% else %}
                  <img class="card-img-top" src="{% static 'images/hero-bg.jpg' %}" alt="Card image cap" style="height: 70%!important;>
                  {% endif %}
                  <div class="card-content">
                      <h4 class="card-title">
                          <a href=""> {{ item.place_name }}
                        </a>
                      </h4>
                      <p class="">
                          {{ item.country }} | {{ item.state }} | {{ item.city }}
                          {% if item.how_to %}
                          {{ item.how_to }}
                          {% endif %}
                          <br>
                          {% if item.place_rating %}
                            Rating : {{ item.place_rating }} out of 5
                          {% endif %}
                          <br>
                          {% if item.place_review_count %}
                            Review count : {{ item.place_review_count }}
                          {% endif %}

                      </p>

                  </div>
                  <!-- <div class="card-body">
                    <p class="card-text">{{ item.city }}</p>
                  </div> -->
                </div>

              {% endfor %}
              <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Filter Your search </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <form method="post" id="date_filter_form" action="/">
                          {% csrf_token %}
                          <div class="" id="date_input" >
                            <div class="form-group">
                              <input type="text" name="City_name" placeholder="Enter City Name :">
                            </div>

                          </div>
                        <input type="submit" name="Submit" id="apply" class="btn btn-primary" value="Apply" style="text-align:center" required>

                      </div>
                      <div class="modal-footer">
                        <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button> -->
                      </div>
                    </div>
                  </div>
                </div>
              <div class="modal fade" id="myModal1" role="dialog">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"></h4>
              </div>
              <div class="modal-body">
                <form method="post" id="date_filter_form">
                  {% csrf_token %}
                  <input type="text" name="filter_id" value="6" hidden>
                  <div class="row clearfix" id="date_input" >
                    <div class="col-sm-6">
                      <div class="form-group">
                        <label for="title">Start date</label>
                        <div class="input-group">
                          <input type="date" id="start_date" name="start_date">
                          <!-- <input type="text" class="form-control" data-inputmask="'alias': 'dd/mm/yyyy'" data-mask=""> -->
                          <!-- <input type="text" class="date-time-picker form-control" id="start_date" name="start_date" data-options='{"timepicker":false, "format":"d-m-Y"}' value="2018/06/01"/> -->
                          <!-- <span class="input-group-append">
                             <span class="input-group-text add-on white">
                                 <i class="icon-calendar"></i>
                             </span>
                          </span> -->
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-6">
                      <div class="form-group">
                        <label for="title">End date</label>
                        <div class="input-group">
                          <input type="date" id="end_date" name="end_date">
                          <!-- <input type="text" class="date-time-picker form-control" id="end_date" name="end_date" data-options='{"timepicker":false, "format":"d-m-Y"}' value="2018/06/01"/>
                          <span class="input-group-append">
                             <span class="input-group-text add-on white">
                                 <i class="icon-calendar"></i>
                             </span>
                        </span> -->
                        </div>
                      </div>
                    </div>
                  </div>
                <input type="submit" name="Submit" id="apply" class="btn btn-primary" value="Apply" style="text-align:center" required>
                  <!-- <input type="button" name="Submit" id="add" class="btn btn-primary" value="Download Report" style="text-align:center" required> -->
              </div>
            </div>

          </div>
        </div>
      </main>
    <script>
      $('#date_filter_formm').on('submit', function(event){
      $('#myModal').modal('hide');

      event.preventDefault();
      console.log("form submitted!")
      $.ajax({
          url : "/",
          type : "POST",
          data : $('#date_filter_form').serialize(),
          success : function(json) {

              console.log(json);
              console.log("success");
              if(json['status'] == 1){
                // $("#loader").fadeOut();
                // $('#total_users').html(json['data']['total_users'])
                // $('#total_follower').html(json['data']['total_follower'])
                // $('#total_blocked_users').html(json['data']['total_blocked_users'])
                // $('#total_tracks').html(json['data']['total_tracks'])
                // $('#total_collabs').html(json['data']['total_collabs'])
                // $('#total_comments').html(json['data']['total_comments'])
                // $('#total_likes').html(json['data']['total_likes'])
                // $('#total_daily_task').html(json['data']['total_daily_task'])
                // $('#total_gifts').html(json['data']['total_gifts'])
                // $('#total_recordings').html(json['data']['total_recordings'])
              }
              else{
                $("#loader").fadeOut();
                $('#response').html('<div class="alert alert-danger alert-dismissible in"><a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a><span id="success-message">'+json["message"]+'</span></div>')
              }
          },
          error : function(xhr,errmsg,err) {
            $("#loader").fadeOut();
              $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                  " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
              console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
          }
      });
  });
    </script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    </body>
</html>
